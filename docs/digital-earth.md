مفاهیم و کاربردهای زیرساخت ابری بومی برای داده‌های مکانی

تفکر ابری بومی (Cloud-Native) به روش‌هایی برای ساخت و اجرای برنامه‌ها اشاره دارد که از مزایای مدل تحویل رایانش ابری بهره می‌برند. در ابتدا، بسیاری از افراد صرفاً روش‌های کاری فعلی خود را بر روی یک پلتفرم ابری منتقل می‌کردند که به آن "انتقال و جابجایی" (lift and shift) می‌گفتند. با گذشت زمان و درک بهتر نحوه استفاده از ابر و روش‌های کاری متفاوتی که فراهم می‌کند، مفاهیم جدیدی پدید آمدند، مانند استفاده از یک فضای ذخیره‌سازی شیء (object store) برای ذخیره داده‌ها به جای دیسک‌های چرخشی و سیستم‌های فایل. این تغییرات مستلزم یک تغییر پارادایم در نحوه تفکر است، اما پس از درک آن، کارها را بسیار سریع‌تر و ساده‌تر می‌کند، حتی اگر زیربنا پیچیده‌تر باشد، و همچنین امکان مقیاس‌پذیری (scale) را فراهم می‌آورد.

یکی از تغییرات در نحوه تفکر در مورد سرورها، حرکت از سرورهای "حیوان خانگی" (pets) که از آنها مراقبت می‌شد و از دست دادنشان ناراحت‌کننده بود، به سرورهایی شبیه "ماهی قرمز" (goldfish) است که اگر بمیرند، به راحتی با یک سرور دیگر جایگزین می‌شوند و کسی متوجه نمی‌شود. این تفکر با استفاده از گروه‌های مقیاس‌گذاری خودکار (autoscaling groups) محقق می‌شود که دستوری (recipe) برای نحوه راه‌اندازی و پیکربندی سرورها دارند. هر سروری که در گروه مقیاس‌گذاری خودکار راه‌اندازی می‌شود، از این دستور پیروی می‌کند و آماده به کار می‌شود، و تعداد سرورهای در حال اجرا می‌تواند بین صفر تا صد متغیر باشد. این روش باعث می‌شود سرورها قابل جایگزینی و خودترمیم‌شونده باشند.

علاوه بر تفکر در مورد سرورها به عنوان منابع قابل جایگزینی، مفهوم "به عنوان یک سرویس" (as a service) نقش مهمی دارد. مثال‌هایی از این سرویس‌ها شامل پایگاه داده به عنوان یک سرویس (database as a service) یا ذخیره‌سازی به عنوان یک سرویس (storage as a service) هستند. استفاده از پایگاه داده به عنوان یک سرویس، مانند PostGIS از طریق RDS (سرویس پایگاه داده رابطه‌ای آمازون)، مدیریت پشتیبان‌گیری‌ها، بازیابی پس از فاجعه، مقیاس‌بندی، و به‌روزرسانی‌های کوچک نسخه‌ای را بر عهده می‌گیرد. این کار بخش‌های خسته‌کننده مدیریت پایگاه داده را ساده‌تر می‌کند و به شما امکان می‌دهد روی افزودن یا بهینه‌سازی داده‌ها تمرکز کنید. مقیاس‌پذیری خودکار بر اساس تقاضا مهم است، اما گاهی اوقات بهتر است اندازه سرویس را بر اساس بار منظم و پیک خود تنظیم کنید؛ به این کار "اندازه‌بندی صحیح" (right sizing) گفته می‌شود. برای بارهای بسیار پیک، معماری‌های دیگری مانند بدون سرور (serverless) که در مقیاس‌پذیری بسیار سریع عالی هستند، مناسب‌ترند.

**زیرساخت به عنوان کد (Infrastructure as Code)**

یکی از مفاهیم کلیدی در ابری بومی، نوشتن کد برای تعریف و استقرار زیرساخت است. به جای پیکربندی دستی زیرساخت ("clicky clicky")، شما کدی می‌نویسید که زیرساختی را که می‌خواهید مستقر کنید (مانند شبکه، پایگاه داده، سرور، DNS) تعریف می‌کند. این مجموعه دستورالعمل‌های اعلانی به عنوان کد نوشته می‌شوند و سپس با استفاده از ابزارهایی مانند Terraform یا AWS CDK (Cloud Development Kit) مستقر می‌شوند. این روش زمان بیشتری در ابتدا می‌برد، اما یک محیط ساده و تکرارپذیر ایجاد می‌کند که می‌دانید چگونه پیکربندی شده است، زیرا در کد موجود است.

مزایای زیرساخت به عنوان کد:
*   **تکرارپذیری:** می‌توانید دقیقاً همان محیط را هر بار ایجاد کنید.
*   **مستندسازی خودکار:** کد تا حد زیادی وضعیت زیرساخت شما را مستند می‌کند.
*   **پارامترسازی:** می‌توانید متغیرهایی اضافه کنید تا پیکربندی‌های کمی متفاوت (مثلاً برای محیط‌های توسعه، مرحله‌بندی و تولید) را با استفاده از همان کد مستقر کنید.
*   **اطمینان:** با داشتن کد در یک مخزن نسخه‌بندی شده (مانند Git)، می‌توانید اطمینان داشته باشید که محیط مستقر شده دقیقاً همان چیزی است که در کد تعریف شده است.
*   **فرآیندهای توسعه نرم‌افزار:** این رویکرد امکان استفاده از شیوه‌های توسعه نرم‌افزار مانند ادغام پیوسته (CI) و استقرار پیوسته (CD) را برای زیرساخت فراهم می‌کند. این شامل فرآیندهایی مانند درخواست‌های pull، بررسی کد، بررسی خودکار تغییرات پیش از استقرار (مانند Terraform plan)، و استقرار خودکار یا دستی تغییرات تأیید شده است. این فرآیندها اطمینان از انطباق با الزامات امنیتی را نیز افزایش می‌دهند.

مثال‌هایی از کد زیرساخت به صورت آنلاین در دسترس هستند.

**کانتینرسازی (Containerization)**

کانتینرها، به ویژه Docker containers، روشی برای بسته‌بندی یک برنامه و تمام وابستگی‌های آن در یک واحد استاندارد ارائه می‌دهند. Docker container از یک Dockerfile ایجاد می‌شود که دستوری برای ساختن آن است (شروع با یک سیستم عامل پایه، نصب نرم‌افزار، کپی کردن فایل‌ها، اجرای یک دستور خاص). نتیجه یک تصویر Docker (Docker image) است که یک محیط "آماده به کار" است.

مزایای استفاده از کانتینرها:
*   **محیط قابل پیش‌بینی:** محیط کانتینر دقیقا همان چیزی است که تعریف شده است و می‌تواند بارها و بارها اجرا شود.
*   **همسانی بین محیط‌ها:** محیط توسعه شما می‌تواند به محیط‌های مرحله‌بندی و تولید شما نزدیک‌تر باشد. این امر مشکلات رایج ("در دستگاه من کار می‌کند!") را کاهش می‌دهد و همکاری بین توسعه‌دهندگان و عملیات (DevOps) را تسهیل می‌کند.
*   **قابلیت دور انداختن (Disposable):** کانتینرها باید بدون حالت (stateless) باشند، به این معنی که نباید داده‌ها را روی فایل سیستم داخلی خود بنویسند. حالت (state) باید در مکان‌های خارجی مانند فضای ذخیره‌سازی شیء (object store) یا پایگاه داده ذخیره شود. این امکان می‌دهد کانتینرها را به راحتی جایگزین کنید.
*   **قابلیت اطمینان برای پردازش در مقیاس:** با استفاده از کانتینرها، می‌دانید که دقیقاً همان نرم‌افزار در هر زمان اجرا می‌شود، که برای پردازش حجم زیادی از داده‌ها و ساخت محصولات داده‌ای قابل اعتماد حیاتی است.

**کوبرنتیس (Kubernetes)**

Kubernetes یک لایه انتزاعی برای مدیریت و هماهنگی کانتینرها در مقیاس است. این ابزار توسط مهندسان گوگل برای اجرای مجموعه‌ای از برنامه‌ها با مقیاس‌پذیری بالا ایجاد شده است. Kubernetes یک خوشه (cluster) ایجاد می‌کند که دارای لایه مدیریتی و منابع محاسباتی (مانند گروه‌های مقیاس‌گذاری خودکار) است. سپس می‌توانید از آن بخواهید که منابعی مانند برنامه‌های وب یا بارهای کاری پردازش داده را اجرا کند.

Kubernetes کار مدیریت سرورهای زیربنایی را از بار کاری که می‌خواهید اجرا کنید انتزاع می‌کند. این امکان را می‌دهد تا کارهای کوچک (کانتینرهای با مصرف حافظه و CPU کم) یا کارهای بزرگ (کانتینرهای نیازمند CPU و حافظه زیاد) را اجرا کنید.

مثال‌هایی از کاربرد Kubernetes در پروژه‌های بزرگ مانند Digital Earth Africa و Digital Earth Australia شامل اجرای APIهای نقشه‌برداری وب، برنامه‌های وب و بارهای کاری پردازش داده بزرگ (مانند اجرای ۲,۰۰۰ وظیفه همزمان با نیاز به ۱۶ گیگابایت حافظه برای هر کدام) است. این سیستم‌ها می‌توانند بارهای کاری بسیار بزرگی را بر روی نمونه‌های اسپات (spot instances) اجرا کنند، که منابع محاسباتی استفاده نشده‌ای هستند که می‌توان با قیمتی حدود یک دهم قیمت معمولی رزرو شده، برای آن‌ها پیشنهاد داد. این امکان پردازش مقادیر فوق‌العاده‌ای از داده‌ها را با هزینه‌های نسبتاً کم فراهم می‌کند. برای مثال، ایجاد موزاییک بدون ابر سالانه برای Sentinel 2 بر روی آفریقا (۴۰۰ ترابایت داده در سال) با استفاده از حدود ۱,۰۰۰ سرور، ۱۵ ترابایت حافظه و هزاران CPU، می‌تواند حدود ۴,۰۰۰ دلار برای یک سال هزینه داشته باشد.

**توابع بدون سرور (Serverless Functions)**

توابع بدون سرور (مانند AWS Lambda) برای واحدهای کوچک کار که به سرعت انجام می‌شوند، مناسب هستند. این روش زمانی که بار کاری شما نیازمند زمان اجرای طولانی یا حافظه بسیار زیادی نیست، عالی است.

مثال کاربرد توابع بدون سرور:
*   هنگامی که یک مجموعه داده (مانند Sentinel 2 یا Landsat) در یک فضای ذخیره‌سازی شیء (object store) در یک منطقه جغرافیایی قرار می‌گیرد، یک اعلان (notification) ایجاد می‌شود.
*   یک تابع بدون سرور به این اعلان مشترک می‌شود و فعال می‌شود.
*   این تابع کد کوچکی (مثلاً به زبان پایتون) را برای کپی کردن فایل‌ها به منطقه جغرافیایی دیگر اجرا می‌کند.
*   پس از اتمام، یک اعلان جدید ایجاد می‌کند که نشان می‌دهد داده‌ها در منطقه مقصد رسیده‌اند.

این یک مثال از یک چارچوب یا خط لوله رویداد-محور (event-driven) است. توابع بدون سرور می‌توانند مستقیم به اعلان‌ها گوش دهند یا کارها را از یک صف (queue) بردارند. در حالی که توابع بدون سرور برای کارهای کوچک و سریع عالی هستند (مانند رندر کردن کاشی‌های WMTS برای نمایش)، برای کارهای بزرگ‌تر و نیازمند حافظه بیشتر (مانند الگوریتم‌های پردازش تصویر صحنه به صحنه که نیاز به حدود ۱۰ گیگابایت رم دارند) ممکن است کانتینرها با استفاده از Kubernetes مناسب‌تر باشند. همچنین، اکنون می‌توان کانتینرها را در محیط‌های بدون سرور مانند Lambda اجرا کرد.

**معماری رویداد-محور (Event-Driven Architecture)**

در معماری رویداد-محور، واحد‌های کار (مانند توابع بدون سرور یا کانتینرها) بر اساس رویدادها یا اعلان‌ها فعال می‌شوند. این رویکرد بسیار قوی است.

نحوه کار:
*   یک رویداد (مانند رسیدن یک فایل جدید) یک اعلان ایجاد می‌کند.
*   سرویس‌های اعلان (مانند Amazon SNS) این اعلان‌ها را منتشر می‌کنند.
*   سرویس‌های صف (مانند SQS) به این اعلان‌ها گوش می‌دهند و واحدهای کار را در صف قرار می‌دهند.
*   توابع بدون سرور یا کارگران کانتینر (که ممکن است بر اساس اندازه صف مقیاس‌بندی شوند) کار را از صف برمی‌دارند و پردازش می‌کنند.
*   هنگامی که یک واحد کار به پایان می‌رسد، می‌تواند یک اعلان جدید ایجاد کند تا کار بعدی را در زنجیره رویدادها فعال کند.

مزیت اصلی این رویکرد این است که واحد کار فعلی نیازی ندارد بداند بعد از آن چه اتفاقی می‌افتد. فقط کافی است کار خود را تمام کند و یک اعلان ایجاد کند. سپس یک یا چند صف دیگر می‌توانند به آن اعلان مشترک شوند و کار بعدی را انجام دهند. این امر کار را از فرآیندهای پایین‌دست جدا می‌کند. علاوه بر این، این اعلان‌ها می‌توانند به صورت عمومی منتشر شوند، به طوری که مصرف‌کنندگان داده نیز بتوانند به آن‌ها گوش دهند و از رسیدن داده‌های جدید مطلع شوند، بدون نیاز به ساخت زیرساخت خودشان.

**قالب‌های داده ابری-بومی (Cloud-Native Data Formats)**

یکی دیگر از فرصت‌های بزرگ در حوزه ابری بومی داده‌های مکانی، ظهور قالب‌های داده‌ای است که برای استفاده در محیط ابری بهینه شده‌اند. مثال‌هایی از این قالب‌ها شامل Cloud Optimized GeoTIFFs (COGs)، Zarr برای سری‌های زمانی متراکم، و GeoParquet برای داده‌های برداری و جدولی هستند.

مزیت اصلی این قالب‌ها این است که امکان پخش مستقیم (streaming) داده‌ها را از فضای ذخیره‌سازی شیء (مانند S3) فراهم می‌کنند، اغلب از طریق یک URL ساده HTTP. این به این معنی است که شما نیازی به دانلود کل فایل داده برای استفاده از آن ندارید. می‌توانید فقط پیکسل‌ها یا ردیف‌هایی را که برای تجزیه و تحلیل خاص خود نیاز دارید، مستقیماً از طریق شبکه بخوانید.

این مفهوم با ایده **عدم واسطه‌گری داده (Disintermediating Data)** مرتبط است. به جای نیاز به یادگیری APIهای پیچیده OGC یا پورتال‌های داده اختصاصی برای دسترسی به داده‌ها، برنامه‌ها و کد شما می‌توانند مستقیماً با فرمت داده ابری-بومی ارتباط برقرار کنند. این کار ابزارها و کدی را که می‌نویسید ساده‌تر می‌کند و وابستگی به سرورهای واسطه را کاهش می‌دهد. این یک فراخوان برای متصدیان داده است تا داده‌های خود را در این قالب‌های ابری-بومی منتشر کنند.

این امکان که ابزارهای GIS دسکتاپ یا کدهای پایتون بتوانند مستقیماً از URL داده‌ها را استریم کنند، بسیار توانمند‌ساز است.

**تکرارپذیری (Reproducibility)**

مفهوم تکرارپذیری در سراسر موضوعات ابری بومی داده‌های مکانی مطرح می‌شود. از زیرساخت به عنوان کد و کانتینرسازی که محیط‌های قابل تکرار برای استقرار و اجرای کد فراهم می‌کنند، تا داده‌های ابری بومی که به طور عمومی و استاندارد در دسترس هستند، تا ابزارهای مانند Jupyter notebooks که به دانشمندان امکان می‌دهند تحلیل‌های خود را به روشی تکرارپذیر انجام دهند و به اشتراک بگذارند. این هدف کمک می‌کند تا زمان صرف شده برای سازماندهی داده‌ها کاهش یابد و دانشمندان و کاربران بتوانند زمان بیشتری را صرف استفاده و تحلیل داده‌ها کنند. دسترسی به داده‌های با کیفیت بالا و استاندارد شده مانند مجموعه‌های Landsat و Sentinel 2 در فضای ذخیره‌سازی ابری تحت مجوز باز، فرصت فوق‌العاده‌ای برای تحقیقات تکرارپذیر فراهم کرده است.

**شروع کار**

در حالی که مفاهیمی مانند Kubernetes می‌توانند بسیار پیچیده باشند، رویکردهای دیگری برای شروع با ابری بومی وجود دارند. تمرکز بر استفاده از **زیرساخت به عنوان کد** برای قابل تکرار کردن محیط‌های ساده‌تر می‌تواند نقطه شروع خوبی باشد. همچنین، شروع به استفاده از **قالب‌های داده ابری-بومی** مانند COGs می‌تواند مزایای بزرگی را به همراه داشته باشد. مثال‌هایی از کد زیرساخت به عنوان کد به صورت آنلاین در دسترس هستند.