## GeoParquet: فرمت نوین داده‌های برداری برای دنیای ابری

به دنیای داده‌های مکانی ابری خوش آمدید. اگر با فرمت‌های ابری بومی مانند Cloud Optimized GeoTIFFs (COGs) برای داده‌های رستری آشنا هستید، GeoParquet را می‌توان **نسخه برداری این فرمت‌ها** در نظر گرفت. این یک **فرمت داده مکانی ابری بومی** است. کار با این فرمت‌ها به این معنی است که ممکن است دیگر نیازی به سرورهایی مانند GeoServer یا MapServer برای ارائه داده‌ها نداشته باشید.

این فرمت‌ها به بخشی **بسیار مهم** در صنعت مکانی تبدیل شده‌اند. در دنیای کنونی، ما با **حجم بسیار بزرگتری از داده‌ها** سر و کار داریم. روش‌های قدیمی‌تر که شامل دانلود داده‌های ماهواره‌ای یا فایل‌های برداری حجیم بر روی کامپیوتر محلی بود، دیگر برای پردازش این داده‌های عظیم کارآمد نیستند. استفاده از منابع میزبانی شده بر روی **ارائه‌دهندگان ابری** مانند آمازون، گوگل کلود یا آژور، امکان **مقیاس‌پذیری بهتر حجم کاری** را فراهم می‌کند. فرمت‌هایی مانند GeoParquet به ما اجازه می‌دهند تا با فرمت‌های فایلی بزرگتر کار کنیم. این ابزارها به دانشمندان کمک می‌کنند تا پردازش‌های بیشتری بر روی داده‌های خود با استفاده از فرمت‌های داده جدید انجام دهند.

### GeoParquet چیست؟

GeoParquet یک **فرمت فایل جدید برای ذخیره داده‌های برداری مکانی** است که بر موفقیت یک فرمت فایل موجود به نام **Parquet** بنا شده است. Parquet برای حدود یک دهه وجود داشته و برای **ذخیره داده‌های جدولی** استفاده می‌شود. اگر به چیزی شبیه اکسل فکر کنید، یک جدول مجموعه‌ای از ستون‌ها است که هر ستون دارای داده‌هایی است (عددی، متنی و غیره). در زمینه مکانی، شما می‌توانید یک ستون از عوارض مکانی داشته باشید که هر هندسه با یک یا چند ویژگی مرتبط است. GeoParquet با توصیف ستون هندسه مرتبط با این ویژگی‌ها، این ساختار را در قالب جدولی Parquet مدل می‌کند.

بنابراین، GeoParquet به معنای دقیق کلمه یک فرمت فایل کاملاً جدید نیست. این فرمت **از فرمت فایل Parquet استفاده می‌کند** و **استانداردسازی‌ای برای نحوه ذخیره فراداده‌های مکانی** در این فرمت موجود را توصیف می‌کند. این مانند Cloud Optimized GeoTIFFs است که بر موفقیت فرمت TIFF بنا شده‌اند. GeoParquet با استفاده از Parquet، از **سرمایه‌گذاری بزرگی که خارج از صنعت مکانی انجام شده**، بهره می‌برد.

به عبارت دیگر، جامعه مکانی **بر شانه‌های غول‌ها ایستاده** است. Parquet خود یک فرمت ابری بومی است و GeoParquet بر اساس آن ساخته شده و یک **افزونه مکانی** به آن اضافه می‌کند. GeoParquet بسیاری از ویژگی‌های خوب خود را **رایگان** از طریق ساختار موجود Parquet به دست می‌آورد، به شرطی که بتوان داده‌های مکانی را به طور مؤثر سازماندهی کرد.

### شاخص‌گذاری مکانی و فشردگی داده

یکی از جنبه‌های مهم GeoParquet، **شاخص‌گذاری مکانی** آن است. شاخص‌گذاری داده‌های برداری **بسیار سخت‌تر** از داده‌های رستری است. داده‌های رستری معمولاً شبکه‌بندی منظم و پیکسل‌های کوچک نسبت به وسعت کلی دارند، که مرتب‌سازی آن‌ها را آسان می‌کند. اما داده‌های برداری می‌توانند **نامنظم** باشند؛ مثلاً رودخانه‌های طولانی یا مسیرهای پرواز که بخش بزرگی از جهان را پوشش می‌دهند. سازماندهی این هندسه‌ها به گونه‌ای که تمام داده‌های نزدیک به هم در مجموعه داده در کنار هم مرتب شوند، دشوار است.

فرمت‌های دیگری مانند FlatGeobuf نیز شاخص‌گذاری مکانی را پیاده‌سازی کرده‌اند. تفاوت در نحوه شاخص‌گذاری است. FlatGeobuf **هر هندسه را به صورت جداگانه** شاخص‌گذاری می‌کند. این باعث می‌شود شاخص مکانی در صورت وجود تعداد زیادی هندسه **بسیار بزرگ** شود و می‌تواند بخش قابل توجهی از اندازه کل فایل را تشکیل دهد. همچنین، این رویکرد **فشردگی مؤثر** را دشوار می‌کند.

GeoParquet به جای آن، **مجموعه‌ای از هندسه‌ها را همزمان** شاخص‌گذاری می‌کند، شبیه به رویکرد Cloud Optimized GeoTIFF. این امکان **مقیاس‌پذیری مؤثرتر** برای داده‌های بزرگتر را فراهم می‌کند. همچنین به این معنی است که هر یک از این گروه‌ها می‌توانند به صورت یک واحد فشرده شوند. این گروه **واحدی است که در شاخص مکانی قرار می‌گیرد**.

GeoParquet مفهوم گروه‌بندی را **اجرا می‌کند**. کاربران می‌توانند انتخاب کنند که **چند ردیف در هر گروه** قرار دهند و همچنین **نحوه مرتب‌سازی داده‌ها** در گروه‌هایشان را انتخاب کنند. استاندارد GeoParquet 1.1 نحوه ذخیره فراداده‌ها برای مشخص کردن وسعت مکانی هر گروه را تعریف می‌کند، اما **روش مرتب‌سازی خاصی را تجویز نمی‌کند**. این انعطاف‌پذیری امکان نوآوری آینده در الگوریتم‌های مرتب‌سازی را فراهم می‌کند.

از نظر خواندن، این انعطاف‌پذیری **پیچیدگی اضافی ایجاد نمی‌کند**. خواندن به همان شیوه کار می‌کند، صرف نظر از اینکه داده‌ها چگونه مرتب شده‌اند. فراداده‌ای که در ابتدا خوانده می‌شود، جعبه‌های مرزی هر گروه را نشان می‌دهد و پرس و جوهای مکانی را بدون توجه به نحوه ذخیره داده‌ها امکان‌پذیر می‌سازد. با این حال، در سمت نوشتن، تحقیقات بیشتری برای یافتن بهترین روش‌های مرتب‌سازی مورد نیاز است.

یکی از مزایای بزرگ GeoParquet، **فشردگی بسیار مؤثر** آن است. این باعث می‌شود **حرکت داده بین سیستم‌ها بر روی شبکه بسیار سریع‌تر** باشد. اگر داده‌های شما اندازه فایل بزرگتری داشته باشند، دسترسی به آن‌ها زمان بیشتری می‌برد. حتی در مواردی که به شاخص‌گذاری مکانی اهمیتی نمی‌دهید، GeoParquet می‌تواند بهترین فرمت فایل باشد زیرا **فشرده‌ترین فرمت برای دانلود** است.

مثال: یک مجموعه داده شامل 3 میلیون نقطه که در فرمت GeoJSON غیر فشرده حدود 500 مگابایت است، در GeoParquet تنها حدود 30 تا 40 مگابایت خواهد بود. این به معنی **حرکت بسیار سریع‌تر داده** است. این فشردگی هم با شاخص‌گذاری مکانی کار می‌کند (برای دسترسی به بخش‌ها یا ستون‌های کوچک) و هم هنگام دانلود کل فایل مزیت دارد. بخشی از این مزیت به دلیل **فرمت ستونی Parquet** است. در فرمت‌های ستونی، تمام داده‌های یک ستون در کنار هم ذخیره می‌شوند. فشردگی که از شباهت داده‌ها برای ذخیره کارآمدتر استفاده می‌کند، در داده‌های داخل یک ستون که معمولاً شبیه‌تر هستند، بهتر عمل می‌کند. به همین دلیل، اندازه فایل GeoParquet معمولاً بسیار کوچکتر از FlatGeobuf فشرده است (حدود نصف اندازه).

هنگام استفاده از GeoParquet برای تجزیه و تحلیل داده، **مبادله‌ای** وجود دارد. ممکن است برای دسترسی به یک بخش، داده‌های بیشتری نسبت به آنچه واقعاً نیاز دارید، دانلود کنید. اما فشردگی داخلی در Parquet به این معنی است که لازم نیست کل فایل را دانلود کنید. با این حال، اگر فقط به یک ردیف نیاز دارید، مزیت فشردگی ممکن است در مقایسه با حجم داده دانلود شده کمتر باشد. اینجاست که موارد استفاده تحلیلی مانند گروه‌بندی یا پیوند دادن مجموعه داده‌ها، جایی که نیاز به بررسی حجم زیادی از داده‌ها دارید، از GeoParquet بهره می‌برند.

### رابطه با GeoArrow

دلیل دیگری که هیجان زیادی در مورد GeoParquet وجود دارد، **رابطه همزیستی** آن با فناوری دیگری به نام **Arrow** و همتای مکانی آن **GeoArrow** است. GeoParquet یک فرمت فایل است، بنابراین وقتی فایلی را می‌خوانید، باید آن را در چیزی بخوانید. Arrow فناوری‌ای است که بیشتر پیاده‌سازی‌های Parquet برای خواندن و نوشتن داده از آن استفاده می‌کنند. **قوت اصلی Arrow** در این است که به برنامه‌ها اجازه می‌دهد داده‌ها را **در سطح باینری** به جای سطح متنی به اشتراک بگذارند.

تاریخاً، انتقال داده بین کتابخانه‌ها یا برنامه‌ها اغلب شامل تبدیل داده به فرمت متنی (مانند GeoJSON) و سپس بازگرداندن آن به نمایش باینری در برنامه مقصد بود، که بسیار ناکارآمد است. با پشتیبانی از Arrow، برنامه‌ها می‌توانند داده‌ها را **مستقیماً به صورت باینری** منتقل کنند. این به طور قابل توجهی سرعت را افزایش می‌دهد. به عنوان مثال، سرعت خواندن داده‌ها از GeoParquet به یک کتابخانه پایتون از طریق ابزار مشترک GDAL، 33 برابر سریع‌تر شد. حتی خواندن از فرمت‌های دیگر مانند FlatGeobuf و GeoPackage نیز از طریق GDAL به این کتابخانه پایتون 23 برابر سریع‌تر شد. این بهبودها نتیجه **به حداقل رساندن تبدیل داده** با توافق بر یک **فرمت باینری مشترک** است.

GeoArrow و GeoParquet کاملاً یکسان نیستند، اما همپوشانی زیادی دارند. GeoArrow پتانسیل دارد که بسیاری از عملیات‌ها را حتی برای فرمت‌های دیگر سرعت بخشد. اما سریع‌ترین راه برای استفاده از داده‌ها همچنان با **GeoParquet** خواهد بود. این فرمت‌ها **برای کار با هم طراحی شده‌اند**.

### موارد استفاده، محدودیت‌ها و آینده

GeoParquet **یک راه‌حل کامل برای همه چیز نیست**. در حالی که برای برخی **موارد استفاده تحلیلی** عالی است، برای **موارد استفاده تراکنشی** که در آن می‌خواهید فقط یک رکورد واحد را دریافت، به‌روزرسانی یا اصلاح کنید، طراحی نشده است. ابزارهای موجود مانند پایگاه داده‌های SQL (مثلاً PostgreSQL با افزونه PostGIS) برای این موارد استفاده معمولاً مناسب‌تر هستند. اگرچه کارهایی برای بهبود امکان به‌روزرسانی فایل‌های Parquet در حال انجام است.

GeoParquet بر روی **پشتیبانی از موارد استفاده‌ای تمرکز دارد که تا کنون به خوبی پشتیبانی نشده‌اند**. این شامل کار با **مجموعه داده‌های بزرگ، معماری ابری بومی و دسترسی به داده بدون نیاز به سرور** است. این فرمت **مکمل بسیاری از ابزارهای موجود** است نه جایگزین آن‌ها.

از دید ارائه‌دهندگان داده، ایده عدم نیاز به راه‌اندازی و نگهداری سرور برای ارائه داده، **یک مزیت بزرگ** است. این می‌تواند ذخیره‌سازی و به اشتراک‌گذاری داده‌ها را **به طور قابل توجهی ارزان‌تر و ساده‌تر** کند. از دید کاربران، ایده **دسترسی سریع به آنچه می‌خواهند بدون نیاز به مراحل پیچیده** نیز جذاب است.

شاخص‌گذاری مکانی GeoParquet نسبتاً جدید است و در استاندارد 1.1 تعریف شده است. انتظار می‌رود با گذشت زمان، کتابخانه‌های بیشتری این استاندارد را پیاده‌سازی کنند و فرآیند ذخیره داده‌ها به این شیوه پارتیشن‌بندی شده را برای کاربران ساده‌تر کنند. این یک **گام بسیار بزرگ به جلو** خواهد بود.

هیجان زیادی در مورد آینده GeoParquet وجود دارد. امکان **به اشتراک‌گذاری مجموعه‌ داده‌های بزرگ بدون نیاز به سرور** و **قابلیت تعامل بیشتر** در دو سطح (بین شبکه‌ها با GeoParquet و بین برنامه‌ها روی یک ماشین با GeoArrow) بسیار نویدبخش است. GeoParquet و GeoArrow امکان **جداسازی مسئله ذخیره‌سازی داده‌های مکانی حجیم** (با GeoParquet) از **نحوه نمایش کارآمد آن در حافظه** (با GeoArrow) را فراهم می‌کنند. این به توسعه‌دهندگان اجازه می‌دهد تا بر روی **بهترین روش برای عملیات بر روی داده‌ها** مانند پیوندهای مکانی یا بصری‌سازی داده‌های بزرگ تمرکز کنند.

این فناوری در حال حاضر در ابزارهای مختلفی مانند GDAL و از طریق آن در QGIS و همچنین در کتابخانه‌های مختلف در زبان‌هایی مانند پایتون و R در حال ادغام است. این پتانسیل زیادی برای **علم داده مکانی سریع** در آینده در ابزارهای مختلف ایجاد می‌کند.

در حالی که ممکن است در آینده فرمت‌های داده دیگری ظاهر شوند که GeoParquet را بهبود بخشند، در حال حاضر، GeoParquet در کاربرد خود برای مجموعه داده‌های بزرگ **پیشگام** است. این فرمت ابزارهای موجود را تکمیل می‌کند و برای موارد استفاده‌ای که تا کنون به خوبی پشتیبانی نشده‌اند، راه حل ارائه می‌دهد.
